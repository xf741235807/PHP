<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Ajax1 -  请求纯文本数据</title>
</head>
<body>
	<button id="button">请求纯文本</button>
	<br>
	<div id="text"></div>
	<script>
		// 监听button对象
		document.getElementById('button').addEventListener('click',loadText);

		// 实现loadText方法
		function loadText(){
			// Asynchronouse JavaScript And XML
			// axios Fetch API prototype NODE API jQuery
			// XMLHttpRequest
			// 1.实例化xhr对象
			var xhr = new XMLHttpRequest();
			console.log(xhr.readyState);
			console.log(xhr);
			// 2.配置对象信息 type url/file asyn(是否异步)
			xhr.open("GET","sample.txt",true);  // false 时一般情况下在加载完数据之后有执行的方法或事件的时候才用到

			// 3.执行处理数据的方法
			// xhr.onload = function(){
			// 	if(this.status == 200){
			// 		console.log(this.responseText);
			// 	}
			// }
			xhr.onprogress = function(){
				console.log("加载页面" + this.readyState);
			}
			xhr.onreadystatechange =function(){
			    if (this.status == 200 && this.readyState == 4) {  // status 网络状态码
			    	document.getElementById('text').innerHTML = this.responseText;
			    	
			    	// console.log(this.responseText);
			    }
				
			}
			// 4.发送请求
			xhr.send();
			// console.log(123);

			// 0: 请求未初始化
			// 1: 服务器连接已建立
			// 2: 请求已接收
			// 3: 请求处理中
			// 4: 请求已完成，且响应已就绪

			// 200 : ok
			// 404 : 请求数据失败
		}
	</script>
</body>
</html>